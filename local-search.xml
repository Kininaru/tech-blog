<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>Kininaru 的 2021 摄影选</title>
    <link href="/2021-pic-summary/"/>
    <url>/2021-pic-summary/</url>
    
    <content type="html"><![CDATA[<p><img src="https://images.chromium.link/blog/1XnVPqy3PQQ.jpg" alt="学校旁边通地铁啦"></p>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>自用短链接服务</title>
    <link href="/7nm.co/"/>
    <url>/7nm.co/</url>
    
    <content type="html"><![CDATA[<p><strong>7nm.co</strong></p><p>现在 5 个字母以内又好听不贵的域名已经不好找了，找了一晚上才找到这一个 qwq</p><p>见过了许多短域名（b23.tv, 3.cn, t.cn）后，觉得短链接服务确实挺帅的，于是决定自己搭建一个短链接服务。恰好最近在看 VTB，七海 nanami，就买了个 <code>7nm.co</code>，不仅是七海的缩写，还有 7 纳米的含义。</p><h2 id="设计概览"><a href="#设计概览" class="headerlink" title="设计概览"></a>设计概览</h2><p>这个短链接服务完全部署在 Cloudflare Workers 中，我相信 Cloudflare 对于并发的处理肯定比我自己的服务器强 <del>才不是懒得备案</del> ，并且 Cloudflare Workers KV 这个设计我还是挺满意的。</p><p>整个短链接服务分为两个程序（<a href="https://github.com/Kininaru/short-link">ShortLink</a>, <a href="https://github.com/Kininaru/short-link-api">ShortLinkApi</a>），使用了两个 KV 命名空间。其中，<code>ShortLink</code> 是提供跳转的主程序；<code>ShortLinkApi</code> 是控制程序，负责生成、修改、删除、覆盖短链接。</p><h2 id="项目地址"><a href="#项目地址" class="headerlink" title="项目地址"></a>项目地址</h2><p>提供跳转的本体：<a href="https://github.com/Kininaru/short-link">GitHub - ShortLink</a></p><p>控制端：<a href="https://github.com/Kininaru/short-link-api">GitHub - ShortLinkApi</a></p><h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><p>出于法律问题，这个短链接服务我仅打算自用。但是代码是完全公开的，并且与 <code>7nm.co</code> 没有强耦合。</p><p>如果你在使用过程中有任何问题，或者发现了任何 bug，请发邮件至 <a href="mailto:me@mail.kininaru.dev">me@mail.kininaru.dev</a>。如需部署，请按照以下步骤配置。</p><p>假设你需要为 <code>example.com</code> 配置短链接服务，并在 <code>api.example.com</code> 控制这个服务，那么你需要：</p><ol><li>fork <a href="https://github.com/Kininaru/short-link">ShortLink</a> 和 <a href="https://github.com/Kininaru/short-link-api">ShortLinkApi</a></li><li>在 <a href="https://dash.cloudflare.com/profile/api-tokens">https://dash.cloudflare.com/profile/api-tokens</a> 使用 <code>编辑 Cloudflare Workers</code> 为模板创建一个令牌。</li><li>在 fork 的两个仓库中创建名为 <code>CF_API_TOKEN</code> 的 Actions Secrets，并且将上一步创建的令牌作为值填入。</li><li>在 Cloudflare -&gt; Workers -&gt; KV 中添加两个命名空间，<code>ShortLink</code> 和 <code>ShortLinkApi</code>，并且记下它们的 id。</li><li>修改 fork 之后的两个仓库根目录下的 <code>wrangler.toml</code> 文件，将 <code>kv_namespaces</code> 中 <code>ShortLink</code> 和 <code>ShortLinkApi</code> 对应的 id 改成上一步中记下的 id。</li><li>在 <code>ShortLinkApi</code> 这个 KV 命名空间中，加入一个键 <code>code</code>，值设置为只有你自己知道字符串，我们称之为 <strong>短链接控制令牌</strong>。这个令牌在安装的时候用不到，但是在使用时会用到。</li><li><code>commit</code> 这次更改至两个仓库。如果没出现问题，此时 GitHub Actions 应该被启动，然后将这两个 Workers 添加至你的 Cloudflare 账户。</li><li>配置你的域名，添加 <code>example.com</code> 和 <code>api.example.com</code> 两个解析，启用 Cloudfalre 代理。</li><li>添加 <code>example.com/*</code> 的 Workers 路由至 <code>short-link</code>，添加 <code>api.example.com/*</code> 的 Workers 路由至 <code>short-link-api</code>（如果没有出现这两个 Workers，请刷新页面，或者检查 GitHub Actions 输出结果）。</li></ol><h2 id="接口"><a href="#接口" class="headerlink" title="接口"></a>接口</h2><p>在成功搭建后，Cloudflare Workers 就会自动维护 <code>example.com/*</code> 和 <code>api.example.com/*</code> 的所有请求。前者会自动 302 跳转所有有记录的链接，例如 <a href="https://7nm.co/ZwVk9a">7nm.co/ZwVk9a</a> 会自动跳转到本文；后者用于这些记录的增删改。</p><p>我们在 <strong>api.example.com/manage</strong> 提供了一个添加短链接的快捷方法。目前界面十分简陋（<a href="https://api.7nm.co/manage">api.7nm.co/manage</a>），并且只有生成短链接的功能，因为我暂时不需要其他功能 <del>才不是因为我懒</del>。</p><p>打开这个链接后会出现一个页面，此时你需要打开浏览器终端，然后输入 <code>localStorage.setItem(&quot;code&quot;, &quot;请填入你的短链接控制令牌&quot;);</code>，执行，然后就可以使用了。需要注意的是，你需要保证这个链接是一个以 <code>http</code> 或者 <code>https</code> 开头的合法链接，否则后端会拒绝生成链接。</p><p>虽然前端界面很简陋，但后端 API 较为完善，可以提供以下功能。</p><blockquote><p> 如果没有特殊说明，以下所有 API 请求都要添加 <code>Authorization</code> 请求头，值为上文你自定的<strong>短链接控制令牌</strong>。</p></blockquote><p><strong>api.example.com/add</strong></p><ul><li><p>从一个普通链接生成一个短链接</p></li><li><p><code>POST</code></p></li><li><p>request body 应该是一个 JSON，形如</p><figure class="highlight json"><table><tr><td class="gutter"><div class="code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><pre><code class="hljs json">&#123; <span class="hljs-attr">&quot;link&quot;</span>: <span class="hljs-string">&quot;https://another.example.com/urlpath&quot;</span> &#125;<br></code></pre></td></tr></table></figure></li><li><p>返回值是一个 JSON</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs json">&#123; <span class="hljs-attr">&quot;code&quot;</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">&quot;msg&quot;</span>: <span class="hljs-string">&quot;/FL44zE&quot;</span>&#125;<br></code></pre></td></tr></table></figure><p><code>code</code> 为 0 时则添加成功，<code>msg</code> 为短链接的 <code>urlpath</code>。在 <code>urlpath</code> 前加上 <code>example.com</code> 就能 302 跳转。</p><p><code>code</code> 为 1 时添加失败，失败原因会存在 <code>msg</code> 中，目前有 <code>&quot;link error&quot;</code> 和 <code>&quot;no extra space&quot;</code>，前者意味着你提交的链接格式非法，后者说明在生成短链接的时候，发生了两次 MD5 碰撞，需要增加链接长度。</p><p>如果你遇到了后者这种情况，请给我发邮件，我会第一时间处理。同时，如果你有更好的短链接算法，也欢迎交流或者 PR。</p></li><li><p>如果你提交了一个已生成过的普通链接，则会返回之前生成的短链接链接。</p></li></ul><p><strong>api.example.com/delete</strong></p><ul><li><p>删除一个短链接记录</p></li><li><p><code>POST</code></p><p>其实这里应该使用 <code>DELETE</code>，更符合 HTTP 协议的语义。在后文设计思想中我会对这一点进行讨论。</p></li><li><p>request body 应该是一个 JSON，形如</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs json">&#123; <span class="hljs-attr">&quot;shortLink&quot;</span>: <span class="hljs-string">&quot;/FL44zE&quot;</span> &#125;<br></code></pre></td></tr></table></figure></li><li><p>返回值是一个 JSON</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs json">&#123; <span class="hljs-attr">&quot;code&quot;</span>: <span class="hljs-number">0</span> &#125;<br></code></pre></td></tr></table></figure><p>一般来说，我们保证这次删除操作一定能够成功，所以理论上不存在例外情况。</p></li></ul><p><strong>api.example.com/set</strong></p><ul><li><p>自主定一个短链接记录，如果记录已存在，则会返回失败</p></li><li><p><code>POST</code></p></li><li><p>request body 应该是一个 JSON，形如</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs json">&#123;<br>    <span class="hljs-attr">&quot;shortLink&quot;</span>: <span class="hljs-string">&quot;/special&quot;</span>,<br>    <span class="hljs-attr">&quot;link&quot;</span>: <span class="hljs-string">&quot;https://special.example.com/links&quot;</span><br>&#125;<br></code></pre></td></tr></table></figure><p>语义很明显了，这里不做解释。</p></li><li><p>返回值是一个 JSON</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs json">&#123; <span class="hljs-attr">&quot;code&quot;</span>: <span class="hljs-number">0</span> &#125;<br></code></pre></td></tr></table></figure><p>0 代表设定成功，1 代表短链接已存在。</p></li><li><p>通过这个 API，你可以设置一些极短的特殊链接，比如 <a href="https://7nm.co/h">7nm.co/h</a> 就可以极快地访问这个博客。当然，直接修改名为 <code>ShortLink</code> 的 Cloudflare KV 里面的映射也可以实现同样的效果。</p></li></ul><p><strong>api.example.com/alive</strong></p><ul><li><p>检测服务器是否在线</p></li><li><p>任意 HTTP method</p></li><li><p>返回值是一个 JSON，当它的值是</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs json">&#123;<br>    <span class="hljs-attr">&quot;code&quot;</span>: <span class="hljs-number">0</span>,<br>    <span class="hljs-attr">&quot;msg&quot;</span>: <span class="hljs-string">&quot;ShortApi ctrl server.&quot;</span><br>&#125;<br></code></pre></td></tr></table></figure><p>时，我们认为服务器运作正常。</p></li></ul><h2 id="设计"><a href="#设计" class="headerlink" title="设计"></a>设计</h2><p><strong>ShortLink</strong></p><p>这个转发程序十分简单，核心仅包含这几行代码</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">let</span> path = <span class="hljs-string">&quot;/&quot;</span> + request.url.split(<span class="hljs-string">&quot;/&quot;</span>)[<span class="hljs-number">3</span>];<br><span class="hljs-keyword">let</span> forwardLink = <span class="hljs-keyword">await</span> ShortLink.get(path);<br><span class="hljs-keyword">if</span> (forwardLink === <span class="hljs-literal">null</span>) <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Response(<span class="hljs-string">&quot;Link not found.&quot;</span>, &#123;<span class="hljs-attr">status</span>: <span class="hljs-number">404</span>&#125;);<br><span class="hljs-built_in">console</span>.log(<span class="hljs-string">`<span class="hljs-subst">$&#123;path&#125;</span>,<span class="hljs-subst">$&#123;forwardLink&#125;</span>,<span class="hljs-subst">$&#123;<span class="hljs-built_in">Date</span>.now()&#125;</span>`</span>);<br><span class="hljs-keyword">return</span> Response.redirect(forwardLink, <span class="hljs-number">302</span>);<br></code></pre></td></tr></table></figure><p>简单来说，这个转发端会获取每个请求的 <code>urlpath</code>，然后在 <code>ShortLink</code> 这个 KV 空间中寻找一个用于跳转的链接。如果找到了，就 302 跳转过去；如果没找到，就返回 404 错误。</p><p>为什么用 302 跳转？因为这样就可以精确地统计每次访问。未来可以通过分析 Cloudflare 的日志来获取访问信息。并且这样设计还有针对搜索引擎策略的考虑。</p><p><strong>ShortLinkApi</strong></p><p>这个程序负责增删改转发映射规则，还提供了一个前端管理界面。</p><p>所有控制信息均存在 <strong>ShortLinkApi</strong> 这个 KV 命名空间中（目前只有一个 <code>code</code> 负责控制身份），可以自行修改。程序在收到请求之后，首先判断 path 是不是 <code>/manage</code>，如果是，就直接返回静态页面，如果不是，就判断请求头中 <code>Authorization</code> 的值是否正确，如果不正确就返回 403，如果正确就允许此次操作。</p><p>为了简化设计，这个程序并没有过多地分析收到的请求。对于所有的请求，程序会先将它们的请求体变成一个 JavaScript 对象：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">let</span> body = <span class="hljs-keyword">await</span> request.json();<br></code></pre></td></tr></table></figure><p>然后接下来的所有逻辑都依赖这个 <code>body</code> 对象。这也是我在 <code>delete</code> API 中使用 POST 请求的原因，因为 DELETE 请求并没有请求体。</p><p>关于 <code>ShortLinkApi</code> 剩余的部分没啥可以说的，就是一个 <code>switch</code> 负责调用请求对应的函数，然后执行并返回。</p><p><strong>生成短链接的算法</strong></p><ol><li>收到了一个链接，检查这个链接是否合法</li><li>对链接进行 MD5 计算，得到一个长度为 16 的 <code>Uint8Array</code></li><li>取上一步中数组的前 6 位，对 62（10 + 26 + 26）取余之后变成 <code>0 - 9, A - Z, a - z</code> 中对应的字符，然后在这个字符串前面加上 <code>/</code></li><li>取上一步得到的字符串，查看是否存在。如果：<ul><li>不存在：返回这个字符串</li><li>存在，但是对应的长链接相同：返回这个字符串</li><li>存在，但是对应的长链接不同：取第二步中数组的后 6 位，进行第三步，取得一个字符串，再进行本校验步骤</li></ul></li></ol><p>第 4 步的重复校验只能容忍一次重复。如果两次都碰撞了，则会要求管理员更改代码增加一位短链接。</p><p>我对这个短链接算法并不是很满意，因为对于碰撞的处理太草率了，应该设计容错率更高的碰撞算法。但是 Cloudflare Worker 只能运行 10ms，查询 KV 相对来说非常耗时，所以我这么设计了算法。不过这个算法也有一个好处，那就是当重复提交一个长链接时，这个算法会返回已有的短链接，不会占用额外的空间。</p><p>如果你有好的算法，欢迎 PR，或者与通过邮件我讨论。当然你也可以在我的留言板里面写下你的意见，留言板的地址见博客底部。</p><h2 id="最终"><a href="#最终" class="headerlink" title="最终"></a>最终</h2><p>特别感谢 <a href="https://github.com/Zxilly">Zxilly</a> 为本项目添加了 TypeScript 支持以及 Webpack 打包。</p><p>本项目使用 MIT 协议。另外，我不希望有人将这个短链接服务用于不合适的领域。如果你在使用这个项目，可以选择通过<a href="mailto:me@mail.kininaru.dev">邮件</a>告诉我一声，如果我的代码能为你解决一些问题，那我会挺开心的 :)</p><p>我是脆鲨，我永远喜欢 nanami！</p><p><img src="https://images.chromium.link/c8d01e4cee21632345fbce222c63b21b489eab7a.png@518w.webp" alt="nana7mi"></p>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>我的域名变迁</title>
    <link href="/domains/"/>
    <url>/domains/</url>
    
    <content type="html"><![CDATA[<p>自 2018 年拥有了自己的第一个域名之后，我前前后后换了几次主域名。</p><p>对于之前的我来说，换域名和换网名属于同一个性质的事情，想到了新的好域名就换过去。由于此前我还没有为社会创造任何有价值的东西，互联网上没有任何内容强依赖于我公布的链接，所以每次换域名的过程都极其轻松，甚至连解析都可以随意废弃。</p><p>2021 上半年，我换到了现在的域名 <code>kininaru.dev</code>。上大学之后我的网名就固定下来了，所有平台基本上都是 <code>Kininaru</code>（Github、V2EX、QQ、…），所以对这个域名我非常满意。再加上 2021 年暑假，我参加了 Google Summer of Code，提交最终报告的时候，我提供了一个来自此博客的链接 <code>https://kininaru.dev/gsoc-report/</code>，至此 <code>kininaru.dev</code> 就与互联网强关联了，至少 GSoC 的官网已经依赖于这个链接，而我必须保证这个链接一直可用。</p><p>如同上面说的，我对这个域名十分满意，再加上这个域名已经产生了有价值的链接，所以我以后不会再换主域名了。</p><p>但是之前用过的几个域名多少对应了我探索互联网的几个过程，而把这几个过程写下来还是很有回忆价值的，于是就有了这篇博客：我的域名变迁。</p><p><strong>2018-8 ~ 2021-2-13 shiftregister.top</strong></p><p>2018 年 8 月，为了更好、更稳定地发送离岸网络请求，我买了人生中第一台 VPS。配置好了一些关键程序之后，想着反正服务器闲着也是闲着，不如装个 WP。装好 WP 之后就能直接用 IP 访问，这显然很不美观，于是我又买了个域名。当时全平台网名都是 <code>shift_register</code>，于是我上阿里云一搜，<code>shiftregister</code> 加上一个最便宜的后缀 <code>top</code>，每年只要 15 元，于是我便有了第一个域名，<code>shiftregister.top</code>。注册的时候我还在想，等这个域名到期我就能从高中解脱。</p><p>高中生活很忙，我没时间打理 VPS 和 WP。几个月后由于无法支撑服务器开销，再加上离岸需求不那么大了，我不再维护我的 VPS，WP 的数据也随着服务器的销毁而丢失。2019 年 8 月，这个域名到期了。那个时候我已高考完，本应有足够的精力去维护这个域名，但是我沉浸在从高中学业解脱出来的愉悦里，完全没想起这个域名。</p><p>大学学了计算机。不知道哪位领导一拍脑门，规定大一新生不准带电脑。于是我硬是抱着手机刷了半年的学校 OJ，用 AIDE 写了几个 Android 程序。放寒假的时候感觉自己大一上学期啥都没学会，和刚进来的时候没啥区别。在这种拉跨的 CS 氛围下，我花了三个月才想起我好像还有个域名，登上阿里云一看都过期四个月了。</p><p>其实对于 <code>shiftregister.top</code> 我还是挺满意的，虽然现在停用了，但是我打算一直给它续费，并且 301 所有链接。Shift Register（移位寄存器）是我接触到的第一个 CS 相关词语，是高一在社团折腾 Arduino 时学到的元件，基本上对应着我 CS 生涯的开端。而且专业相关的同志一眼看到就能知道这是啥，或许会有一点亲切感吧？要不是对 <code>top</code> 顶级域不满意（经常在诈骗链接里面看到，而且感觉 <code>top</code> 有点意义不明），这个域名我能一直用下去。</p><p><strong>kask.top</strong></p><p>这个域名不是我的主域名，但是我在一段时间内使用过这个域名。</p><p>大一寒假疫情在家，学校不让带电脑的规定管不到我，于是我有了人生中第一台电脑。有了电脑之后自然就开始写代码了。除了 C 语言和 Java，我最早接触的语言就是 PHP。Wordpress 用的是 PHP，中学同学经常和我提起 PHP，最关键的是 PHP 的模板渲染极其方便，能轻松写出一些看起来效果不错的动态页面，所以我在大一下学期写了大约 2 个月的 PHP。</p><p>在写代码的过程中自然也就引用到了我的域名。<code>shiftregister.top</code> 有一个问题就是太长了，每次都得打一堆字母，于是我上阿里云随便一搜，挑了个相对来说比较短的域名 <code>kask.top</code>，并把这个域名广泛地嵌入我的代码中。</p><p>这段时期我并没有什么像样的代码产出，唯一能拿出来说的东西就是一个 PHP 相册，能显示服务器上特定的一些图片。这本质上是一个静态网站，但是用的是 PHP，模板渲染，还有目录文件读取，也算是动静结合吧。</p><p>由于当时不习惯用 GitHub，没有实际产出，博客也还在用 <code>shiftregister.top</code>，所以 <code>kask.top</code> 在互联网上没有留下任何痕迹。再加上这个域名中 <code>kask</code> 有点不明所以，我并不是很喜欢这个域名。在我不写 PHP 之后就没有维护了。</p><p><strong>2021-2-13 ~ 2021-5 chromium.link</strong></p><p>因为对于 <code>top</code> 顶级域有极大的偏见，所以我决定换个域名。当时正在准备申请 GSoC，便想找个开源项目相关的域名。大二开始我对计算机网络就有着浓厚的兴趣，<code>chromium.link</code> 这个域名正好就符合要求。我还给 <code>chrome.chromium.link</code> 做了反向代理，指向 MS Edge 的介绍页（当然 Edge -&gt; Chrome 的也做了），就是玩儿~</p><p>GSoC 期间，我用 <code>chromium.link</code> 提交了大量的 Demo Link，用于展示我代码的运行结果。但是这些链接都是一次性的，在 PR 合并之后就失去意义了，所以 <code>chromium.link</code> 也没有在互联网上留下任何痕迹。在我启用 <code>kininaru.dev</code> 这个域名之后，<code>chromium.link</code> 一度被停用，所有链接都被 302 到了前者对应的链接上。</p><p><code>chromium.link</code> 已通过备案，可以在大陆范围内高速访问。现在我用这个域名部署一些和自己弱关联的纯技术内容，比如 <code>chromium.link/*</code> 中有一些技术学习文章，方便与来自大陆的开发者进行交流。</p><p><strong>kininaru.icu</strong></p><p>上大学之后我的网名就固定下来了，Kininaru。因此，和 Kininaru 没啥关联的 <code>chromium.link</code> 我就不是很想继续用了，随便看了看就买了这个域名，用了几天就换到了 <code>kininaru.dev</code>。由于使用时间过短，这个域名没有任何故事可以说。</p><p><strong>2021-5 ~ kininaru.dev</strong></p><p>这是我的主域名，也打算一直维护下去。<a href="https://kininaru.dev/records/kininaru.dev/">长期维护的解析</a></p><p>我是一个开发者，所以一直一来我都想有一个 dev 域名。整个 dev 顶级域都在 HSTS Preload List 中，这意味着所有支持这个 List 的浏览器在发出请求之前就会把链接改写成 HTTPS。这简直太帅了！但是考虑到一个 dev 域名要 ￥130，我迟迟没有下手。2021 年 5 月，我在 GitHub 上发现了一个<a href="https://cynthia.dev/">法国开发者</a>，用自己的常用 ID 注册了 dev 域名，看起来太酷了！于是我才下定决心注册 <code>kininaru.dev</code>。</p><p>对于这个域名，我确实很满意，因为这个域名包含了我的常用 ID，而且 dev 顶级域看起来很优雅，更不会有诈骗链接用这个后缀（因为太贵了）。再加上这个域名已经产生了被强依赖的链接，所以这个域名我会一直维护下去，并且一直当主域名使用。</p><p><strong>7nm.co</strong></p><p>这是我找了一晚上挑出来的 5 个字母的域名。7nm 的含义是 七海Nana7mi，同时也有 7 纳米的意思。这个域名将会为我提供短链接服务。由于这个服务还没完工，这个域名也还没有投入使用，所以就没啥能拿出来说的事情了，等过几个月再更新一下这个域名的事情~</p>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>WSL2 and Windows Terminal</title>
    <link href="/wsl2/"/>
    <url>/wsl2/</url>
    
    <content type="html"><![CDATA[<blockquote><p>Windows 是最好的 Linux 发行版。</p></blockquote><p>WSL2 发布以后就一直有人这么评论。最近发现 WSL2 和 Windows Terminal 配合起来无比好用。</p><h2 id="效果"><a href="#效果" class="headerlink" title="效果"></a>效果</h2><ul><li>按 Win 键，然后输入 Windows，回车，就能在自己用户文件夹下打开 PowerShell</li><li>按 Win 键，然后输入 Ubuntu，回车，就能在 Linux 用户文件夹下打开 Ubuntu 命令行</li><li>按 Win 键，然后输入 wt，回车，就能在自己用户文件夹下打开 Ubuntu 命令行</li><li>任意文件夹内，右键，选择 在 Windows 终端 中打开，就能在此处打开 PowerShell</li><li>任意文件夹内，右键，选择 在 Windows 终端 预览版 中打开，就能在此处打开 Ubuntu 命令行</li></ul><h2 id="操作"><a href="#操作" class="headerlink" title="操作"></a>操作</h2><ol><li>准备两个 Windows Terminal（Windows Terminal 和 Windows Terminal Preview）</li><li>设置默认终端应用程序为 Windows Terminal Preview（在 Windows Terminal 的设置里面可以找到这个选项）</li><li>在 Windows Terminal Preview 的设置里面，将默认配置文件改成 WSL2（比如 Ubuntu）</li></ol>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>Google Summer of Code 2021 Final Evaluation</title>
    <link href="/gsoc-report/"/>
    <url>/gsoc-report/</url>
    
    <content type="html"><![CDATA[<p>This is my final evaluation of Google Summer of Code 2021.</p><p>I worked in Casbin this summer, and my job is to write code for <a href="https://github.com/casbin/casdoor">Casdoor</a> and <a href="https://github.com/casbin/casnode">Casnode</a>. Click the link to read <a href="https://archives.kininaru.dev/gsoc/2021/proposal.pdf">My Proposal of Google Summer of Code 2021</a>.</p><p>The first part of this report is a brief summary of my work. For detailed contributions, please read the summary of pull requests below.</p><h1 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h1><p>Here are some big features I implemented for Casdoor and Casnode. In addition, I also fixed bugs for both of them.</p><h2 id="Casdoor"><a href="#Casdoor" class="headerlink" title="Casdoor"></a>Casdoor</h2><p>Casdoor is a Single-Sign-On platform based on OAuth 2.0 / OIDC. It can also serve as a service provider (you can use Casdoor to send Emails, upload files, set an avatar). My work during Google Summer of Code is to implement some of these functions, and add new features to it.</p><p><strong>Support avatar tailoring uploading:</strong> This is the first contribution I made to Casbin community. I spent almost a week learning the file structure of Casdoor, Golang and React, then I talked to my mentor about the details and the front end UI. It was really excited to see the PR was merged in the end. After this, I became familiar with the process of making a contribution to the community, so things became easy after that.</p><p><strong>go-sms-sender and the verification code:</strong> There are many SMS providers in mainland China. Each of them has a different API and SDK. So it is not easy to adapt all of them. To keep the code of Casdoor clean and easy to understand, I developed <a href="https://github.com/casdoor/go-sms-sender">go-sms-sender</a>. It is designed to use all kinds of SMS providers easily. Only few lines of code is needed to send a SMS via the sender. With go-sms-sender, I also implemented the function of sending verification code via Email and SMS for Casdoor.</p><p><strong>Turing test:</strong> Users are required to pass a Turing test before sending a verification code to their Emails or Phones.</p><p><strong>Casdoor SDKs:</strong> Casdoor is written in Golang, but it supports many languages. Casdoor uses HTTP requests to communicate with those SDKs. I participated in the development of Casdoor Go SDK, Casdoor JS SDK (supported popup sign in and sign up), Casdoor Java SDK, and reviewed the code of Casdoor PHP SDK.</p><h2 id="Casnode"><a href="#Casnode" class="headerlink" title="Casnode"></a>Casnode</h2><p>Casnode is the official forum of Casbin. Casnode is suitable for open source organizations to use because it supports the two-way synchronization to Google Groups, and can sync its topics and replies to all mailing lists.</p><p><strong>Night mode:</strong> I supported the night mode for Casnode. Now, users can click the switch button to switch between night mode and light mode.</p><p><strong>Refactored the OSS support:</strong> Casnode uses Aliyun STS as a storage provider before. This not that safe because users can upload any file to anywhere in the storage server. I refactored the storage system with another Go module called qor, which supports variables of storage providers, and upload these files in the backend, which is safer than before.</p><p><strong>Server side rendering:</strong> Casnode is written in React, which means that bots from search engines can not get the forum details because they can not execute JS code. I used Chromedp in Golang backend, and added a filter for bots. If a HTTP request has a <code>bot</code> keyword in its <code>User-Agent</code>, it will be recognized by the bot filter, and will receive a rendered page with forum details. This way, you can get the information of the forum from search engines.</p><p><strong>Mailing list support:</strong> Casnode sends Emails to a mailing list when new topics or new replies are made. It can sync all new topics and replies to all mailing lists, and supports the two-way synchronization to Google Groups. This made Casnode suitable for open source organizations to use.</p><p><strong>Embeded plugin:</strong> I implemented the embeded plugin for Casnode. With the plugin, only few lines of HTML code is needed to embed Casnode as a reply plugin to any webpage. For example, <a href="https://oa.casbin.com/">Casbin OA</a> uses Casnode  Embedded Plugin as a reply plugin.</p><h1 id="Contributions"><a href="#Contributions" class="headerlink" title="Contributions"></a>Contributions</h1><p>Here are my contributions to Casbin community.</p><h2 id="Open-Issues"><a href="#Open-Issues" class="headerlink" title="Open Issues"></a>Open Issues</h2><ul><li>Open Issue <a href="https://github.com/casbin/casnode/issues/178">Balance didn’t refresh after receiving “today’s checkin bonus”</a></li><li>Open Issue <a href="https://github.com/casbin/casdoor/issues/20">A suggestion for README.md</a></li><li>Open Issue <a href="https://github.com/casbin/casnode/issues/159">Forum website login error</a></li><li>Open Issue <a href="https://github.com/casbin/casbin.js/issues/34">The installation commands in the docs do not work properly</a></li><li>Open Issue <a href="https://github.com/casbin/casdoor/issues/170">Add a self check at the beginning of the program</a></li><li>Open Issue <a href="https://github.com/casbin/casnode/issues/323">Add a self check when the program starts</a></li></ul><h2 id="Open-Pull-Requests"><a href="#Open-Pull-Requests" class="headerlink" title="Open Pull Requests"></a>Open Pull Requests</h2><ul><li>Open PR <a href="https://github.com/casbin/casnode/pull/185">fix: notification bug</a></li><li>Open PR <a href="https://github.com/casbin/casnode/pull/183">fix: bonus bug and Chinese translation missing</a></li><li>Open PR <a href="https://github.com/casbin/casdoor/pull/34">feat: add go backend API docs</a></li><li>Open PR <a href="https://github.com/casbin/casdoor/pull/33">feat: Go backend API docs</a></li><li>Open PR <a href="https://github.com/casbin/casdoor/pull/32">Fix: Avatar uploading failed</a></li><li>Open PR <a href="https://github.com/casbin/casnode/pull/180">fix: converted sts to qor</a></li><li>Open PR <a href="https://github.com/casbin/casnode/pull/179">feat: convert Aliyun STS to qor/oss</a></li><li>Open PR <a href="https://github.com/casbin/casnode/pull/177">fix: member page links bug</a></li><li>Open PR <a href="https://github.com/casbin/casnode/pull/175">fix: rich text editor img bug</a></li><li>Open PR <a href="https://github.com/casbin/casnode/pull/173">fix: rich list bug</a></li><li>Open PR <a href="https://github.com/casbin/casnode/pull/169">feat: add sensitive words block</a></li><li>Open PR <a href="https://github.com/casbin/casnode/pull/166">fix: node bugs</a></li><li>Open PR <a href="https://github.com/casbin/static/pull/5">feat: added imgs and css for forum night mode</a></li><li>Open PR <a href="https://github.com/casbin/casnode/pull/164">feat: added night mode</a></li><li>Open PR <a href="https://github.com/casbin/static/pull/4">add: night.js for casbin-forum</a></li><li>Open PR <a href="https://github.com/casbin/casdoor/pull/23">feat: added avatar tailoring and uploading</a></li><li>Open PR <a href="https://github.com/casbin/casdoor/pull/22">Support avatar tailoring and updating</a></li><li>Open PR <a href="https://github.com/casbin/casdoor/pull/21">added explainations to Dev and Prod usage in README</a></li><li>Open PR <a href="https://github.com/casbin/casbin-website/pull/178">added details about EnforceEx()</a></li><li>Open PR <a href="https://github.com/casbin/casbin-website/pull/176">Fix: https://github.com/casbin/casbin-website/issues/82</a></li><li>Open PR <a href="https://github.com/casbin/casbin-website/pull/175">Fix: Error document</a></li><li>Open PR <a href="https://github.com/casbin/casbin-website/pull/173">added Casbin RBAC and RBAC96</a></li><li>Open PR <a href="https://github.com/casbin/casbin-website/pull/172">added Casbin RBAC and RBAC96</a></li><li>Open PR <a href="https://github.com/casbin/casbin-website/pull/170">added a tutorial for APIs</a></li><li>Open PR <a href="https://github.com/casbin/casdoor/pull/51">feat: add info about MySQL and Postgres in readme</a></li><li>Open PR <a href="https://github.com/casbin/casdoor/pull/50">feat: add pg for db adapter</a></li><li>Open PR <a href="https://github.com/casbin/google-groups-crawler/pull/3">feat: recognize google group email correctly</a></li><li>Open PR <a href="https://github.com/casbin/casnode/pull/224">feat: sync google group conversations to Casnode</a></li><li>Open PR <a href="https://github.com/casbin/google-groups-crawler/pull/2">fix: typo in readme</a></li><li>Open PR <a href="https://github.com/casbin/google-groups-crawler/pull/1">feat: init commit</a></li><li>Open PR <a href="https://github.com/casbin/casnode/pull/223">feat: added Mailing List</a></li><li>Open PR <a href="https://github.com/casbin/casnode/pull/222">feat: node header image</a></li><li>Open PR <a href="https://github.com/casbin/casnode/pull/221">fix: node background image uploading failed</a></li><li>Open PR <a href="https://github.com/casbin/static/pull/8">fix: add min width to desktop pages</a></li><li>Open PR <a href="https://github.com/casbin/casnode/pull/217">feat: added cdp for ssr</a></li><li>Open PR <a href="https://github.com/casbin/casnode/pull/216">fix: avatar display error in topic page</a></li><li>Open PR <a href="https://github.com/casbin/static/pull/7">fix: picture too wide in notification page</a></li><li>Open PR <a href="https://github.com/casbin/casnode/pull/215">fix: reply box height and avatar too small</a></li><li>Open PR <a href="https://github.com/casbin/casnode/pull/214">add reset username and fixed HTML tag display error</a></li><li>Open PR <a href="https://github.com/casbin/casnode/pull/212">fix: img doesn’t show in richtext editor replies</a></li><li>Open PR <a href="https://github.com/casbin/casnode/pull/211">fix: page didn’t jump on mobile UI and reply links</a></li><li>Open PR <a href="https://github.com/casbin/casnode/pull/210">fix: reload replies from backend incorrectly</a></li><li>Open PR <a href="https://github.com/casbin/casnode/pull/207">refactor: rewrite topic page logic</a></li><li>Open PR <a href="https://github.com/casbin/casnode/pull/206">fix: reply page bug and admin new node page crash</a></li><li>Open PR <a href="https://github.com/casnode/casnode-website/pull/1">Initialized docusaurus files and added CI</a></li><li>Open PR <a href="https://github.com/casbin/casnode/pull/205">made last page the default page of reply box, and made auto jump smooth</a></li><li>Open PR <a href="https://github.com/casbin/casnode/pull/203">feat: auto jump when reply is not in the first page</a></li><li>Open PR <a href="https://github.com/casbin/casnode/pull/201">fix: login check bug</a></li><li>Open PR <a href="https://github.com/casbin/static/pull/6">fix: mobile select2 and casnode reply img error</a></li><li>Open PR <a href="https://github.com/casbin/casnode/pull/193">fix: made casnode adapt the layout according to the page size</a></li><li>Open PR <a href="https://github.com/casbin/casnode/pull/190">feat: convert casbin forum to casnode</a></li><li>Open PR <a href="https://github.com/casbin/casnode/pull/187">fix: rich text editor doesn’t refresh after replying</a></li><li>Open PR <a href="https://github.com/casbin/casnode/pull/186">fix: text colors are not in effect</a></li><li>Open PR <a href="https://github.com/casdoor/casdoor-website/pull/9">feat: add provider intro</a></li><li>Open PR <a href="https://github.com/casdoor/casdoor-website/pull/7">feat: add basic intro to Casdoor</a></li><li>Open PR <a href="https://github.com/casbin/casdoor/pull/73">fix: removed outdated lines in README</a></li><li>Open PR <a href="https://github.com/casbin/casnode/pull/250">feat: use retro style when user did not set gravatar</a></li><li>Open PR <a href="https://github.com/casbin/casnode/pull/249">fix: add Re to mailing list replies</a></li><li>Open PR <a href="https://github.com/casbin/casnode/pull/244">fix: print log when the cookie expires</a></li><li>Open PR <a href="https://github.com/casbin/casnode/pull/243">feat: update crawler to the latest version</a></li><li>Open PR <a href="https://github.com/casbin/google-groups-crawler/pull/16">fix: http client aren’t closed</a></li><li>Open PR <a href="https://github.com/casbin/google-groups-crawler/pull/15">refactor: rewrite all logic</a></li><li>Open PR <a href="https://github.com/casbin/google-groups-crawler/pull/14">fix: Conversation message split</a></li><li>Open PR <a href="https://github.com/casbin/google-groups-crawler/pull/13">fix: Conversation message error</a></li><li>Open PR <a href="https://github.com/casbin/google-groups-crawler/pull/12">refactor: rewrite crawler logic to get conversations</a></li><li>Open PR <a href="https://github.com/casbin/google-groups-crawler/pull/11">fix: code won’t exit when an Internet error happened</a></li><li>Open PR <a href="https://github.com/casbin/google-groups-crawler/pull/10">feat: add cookies when getting messages</a></li><li>Open PR <a href="https://github.com/casbin/casnode/pull/237">fix: invalid date for Google group messages</a></li><li>Open PR <a href="https://github.com/casbin/google-groups-crawler/pull/9">fix: time syntax error in Google groups conversations</a></li><li>Open PR <a href="https://github.com/casbin/google-groups-crawler/pull/8">feat: get conversation start time</a></li><li>Open PR <a href="https://github.com/casbin/casdoor/pull/70">feat: turing test before sending code</a></li><li>Open PR <a href="https://github.com/casbin/casdoor/pull/66">feat: intergrate verification code countdown as a component</a></li><li>Open PR <a href="https://github.com/casbin/casdoor/pull/63">feat: check email and phone number when signing up</a></li><li>Open PR <a href="https://github.com/casbin/casnode/pull/229">feat: upload avatar to oss when sync from google group</a></li><li>Open PR <a href="https://github.com/casdoor/casdoor-java-sdk/pull/1">feat: Maven project init and add getUsers() getOrganizations() API</a></li><li>Open PR <a href="https://github.com/casbin/google-groups-crawler/pull/7">fix: add judgement to avoid crashing</a></li><li>Open PR <a href="https://github.com/casbin/casdoor/pull/57">fix: remove all dom APIs from the project</a></li><li>Open PR <a href="https://github.com/casbin/casdoor/pull/56">Fixed reset phone email data error and removed dom API from ResetModal.js</a></li><li>Open PR <a href="https://github.com/casbin/casdoor/pull/55">feat: add reset Email and phone by using verification code.</a></li><li>Open PR <a href="https://github.com/casdoor/go-sms-sender/pull/1">Add Tencent Cloud and Aliyun as providers</a></li><li>Open PR <a href="https://github.com/casbin/casdoor/pull/54">feat: set password for users</a></li><li>Open PR <a href="https://github.com/casbin/casnode/pull/226">feat: update crawler to v0.0.6 to remove quote from replies</a></li><li>Open PR <a href="https://github.com/casbin/google-groups-crawler/pull/6">feat: removed gmail quote from replies</a></li><li>Open PR <a href="https://github.com/casbin/casnode/pull/225">feat: auto create user during synchronization from Google Groups</a></li><li>Open PR <a href="https://github.com/casbin/google-groups-crawler/pull/5">fix: added some judgement to avoid crashing</a></li><li>Open PR <a href="https://github.com/casbin/google-groups-crawler/pull/4">feat: add author name to email mapping</a></li><li>Open PR <a href="https://github.com/casnode/casnode-website/pull/11">feat: add architecture overview, main-package, routers, controllers</a></li><li>Open PR <a href="https://github.com/casbin/casnode/pull/295">Add low version SQL support to search</a></li><li>Open PR <a href="https://github.com/casbin/casnode/pull/287">Removed keywords in html Tags when searching</a></li><li>Open PR <a href="https://github.com/casbin/casnode/pull/279">Add nil judgements to balance and notification backend to avoid crashing and fixed avatar error in search results</a></li><li>Open PR <a href="https://github.com/casnode/casnode-website/pull/7">feat: add get started page</a></li><li>Open PR <a href="https://github.com/casbin/casnode/pull/273">feat: in-site search for topics</a></li><li>Open PR <a href="https://github.com/casbin/casnode/pull/268">fix: update crawler to v0.1.2 to avoid crashing</a></li><li>Open PR <a href="https://github.com/casbin/casnode/pull/267">fix: signup bug</a></li><li>Open PR <a href="https://github.com/casbin/google-groups-crawler/pull/17">fix: http response nil</a></li><li>Open PR <a href="https://github.com/casbin/casnode/pull/263">feat: convert to casdoor go sdk</a></li><li>Open PR <a href="https://github.com/casdoor/casdoor-go-sdk/pull/2">fix: remove panic in internet errors to avoid crashing</a></li><li>Open PR <a href="https://github.com/casbin/casdoor/pull/85">fix: redirect urls null in app-built-in</a></li><li>Open PR <a href="https://github.com/casdoor/casdoor-go-sdk/pull/1">feat: add update delete User</a></li><li>Open PR <a href="https://github.com/casbin/casdoor/pull/84">fix: wrong usement in getUsername</a></li><li>Open PR <a href="https://github.com/casbin/casdoor/pull/76">feat: authorize via clientId and clientSecret</a></li><li>Open PR <a href="https://github.com/casnode/casnode-embed-js/pull/2">Basic Code</a></li><li>Open PR <a href="https://github.com/casdoor/casdoor-website/pull/37">fix: nginx reload command</a></li><li>Open PR <a href="https://github.com/casbin/casdoor/pull/202">feat: expose email and sms APIs as services to SDK</a></li><li>Open PR <a href="https://github.com/casbin/casdoor/pull/198">feat: integrate Storage config into providers</a></li><li>Open PR <a href="https://github.com/casbin/casdoor/pull/196">feat: integrate OSS into providers</a></li><li>Open PR <a href="https://github.com/casbin/casnode/pull/329">feat: use Casdoor SDK to signup</a></li><li>Open PR <a href="https://github.com/casbin/casdoor/pull/185">Customized OAuth provider login URL</a></li><li>Open PR <a href="https://github.com/casbin/casnode/pull/321">Added Casdoor JS SDK</a></li><li>Open PR <a href="https://github.com/casbin/casnode/pull/319">feat: add react lazyload</a></li><li>Open PR <a href="https://github.com/casbin/casdoor/pull/153">feat: auto login session will expire after 24h</a></li><li>Open PR <a href="https://github.com/casbin/casdoor/pull/149">feat: support SAML okta login</a></li><li>Open PR <a href="https://github.com/node-casbin/redis-adapter/pull/6">feat: add auto release CI</a></li><li>Open PR <a href="https://github.com/casbin/static/pull/18">added a new Button component.</a></li><li>Open PR <a href="https://github.com/casbin/casnode/pull/316">feat: add Button component</a></li><li>Open PR <a href="https://github.com/casdoor/casdoor-js-sdk/pull/7">feat: add semantic release</a></li><li>Open PR <a href="https://github.com/casbin/casnode/pull/363">fix: code mirror editor display bugs</a></li><li>Open PR <a href="https://github.com/casbin/casnode/pull/358">feat: Hide Nodes and Topics</a></li><li>Open PR <a href="https://github.com/casdoor/casdoor-js-sdk/pull/6">feat: support popup window</a></li><li>Open PR <a href="https://github.com/casbin/casbin-oa/pull/14">feat: use casdoor-js-sdk to signin and signup</a></li><li>Open PR <a href="https://github.com/casbin/casnode/pull/357">fix: add nodeId in getTopicByUrlAndTitle</a></li><li>Open PR <a href="https://github.com/casbin/casbin-oa/pull/13">feat: add Casnode embed plguin</a></li><li>Open PR <a href="https://github.com/casdoor/go-sms-sender/pull/3">feat: change provider name</a></li><li>Open PR <a href="https://github.com/casbin/casnode/pull/354">feat: login in embed reply</a></li><li>Open PR <a href="https://github.com/casbin/casdoor/pull/252">feat: add VolcEngine as a SMS provider</a></li><li>Open PR <a href="https://github.com/casbin/casdoor/pull/249">feat: update go-sms-sender to v0.0.2 to support VolcEngine</a></li><li>Open PR <a href="https://github.com/casbin/casnode/pull/351">feat: add router and APIs for embed plugin</a></li><li>Open PR <a href="https://github.com/casbin/casnode/pull/350">Embed plugin</a></li><li>Open PR <a href="https://github.com/casbin/casnode/pull/347">Add API to get topic by url and title</a></li><li>Open PR <a href="https://github.com/casdoor/casdoor-go-sdk/pull/9">feat: modified user, and return user directly</a></li><li>Open PR <a href="https://github.com/casbin/casdoor/pull/220">feat: add user initScore in app.conf</a></li><li>Open PR <a href="https://github.com/casbin/casnode/pull/342">feat: add user initScore in app.conf</a></li><li>Open PR <a href="https://github.com/casbin/casdoor/pull/218">refactor: use ResponseError to response error</a></li><li>Open PR <a href="https://github.com/casbin/casdoor/pull/213">fix: use ReponseError to response error</a></li></ul><h2 id="Review-Pull-Requests"><a href="#Review-Pull-Requests" class="headerlink" title="Review Pull Requests"></a>Review Pull Requests</h2><ul><li>Review PR <a href="https://github.com/casbin/casnode/pull/247#pullrequestreview-671704807">fix: all codemirror focus area</a></li><li>Review PR <a href="https://github.com/casbin/casnode/pull/246#pullrequestreview-671422215">fix: Perfect the function of add node</a></li><li>Review PR <a href="https://github.com/casbin/casdoor/pull/72#pullrequestreview-670363168">feat: add “forget password” [front &amp; backend]</a></li><li>Review PR <a href="https://github.com/casbin/casnode/pull/242#pullrequestreview-669771999">feat: Add new member in UI #194</a></li><li>Review PR <a href="https://github.com/casbin/casnode/pull/241#pullrequestreview-669764803">fix: codemirror textarea focus area</a></li><li>Review PR <a href="https://github.com/casbin/casnode/pull/238#pullrequestreview-668703725">feat:Add advertisement banners to the forum</a></li><li>Review PR <a href="https://github.com/casbin/casdoor/pull/132#pullrequestreview-693382559">feat: add password Item forcibly</a></li><li>Review PR <a href="https://github.com/casbin/casnode/pull/313#pullrequestreview-692457034">add check node info on add new topic and reply</a></li><li>Review PR <a href="https://github.com/casbin/casdoor/pull/117#pullrequestreview-689435765">fix: improve i18n and add some translation</a></li><li>Review PR <a href="https://github.com/casbin/casnode/pull/305#pullrequestreview-689177408">fix: Return to the previous page after language selection</a></li><li>Review PR <a href="https://github.com/casbin/casnode/pull/303#pullrequestreview-687907113">fix: sync google group attachment files to links</a></li><li>Review PR <a href="https://github.com/casbin/google-groups-crawler/pull/18#pullrequestreview-687886977">fix: sync attachment files</a></li><li>Review PR <a href="https://github.com/casbin/casnode/pull/298#pullrequestreview-687827018">feat: add member and poster swagger api docs</a></li><li>Review PR <a href="https://github.com/casbin/casdoor/pull/111#pullrequestreview-686355298">fix: Merge the same translation words #108</a></li><li>Review PR <a href="https://github.com/casbin/casnode/pull/285#pullrequestreview-686349241">feat: add topic and account swagger api docs</a></li><li>Review PR <a href="https://github.com/casbin/casnode/pull/284#pullrequestreview-686070533">feat: migrate beego from v1.x to v2.x</a></li><li>Review PR <a href="https://github.com/casbin/casnode/pull/283#pullrequestreview-685314829">fix: user balance not updated after login #276</a></li><li>Review PR <a href="https://github.com/casbin/casdoor/pull/107#pullrequestreview-684038545">feat: Allow the user to sign up with OAuth</a></li><li>Review PR <a href="https://github.com/casbin/casnode/pull/277#pullrequestreview-682790770">fix: The administrator cannot enter the administrator background #275</a></li><li>Review PR <a href="https://github.com/casbin/casnode/pull/274#pullrequestreview-682413949">fix: Fix the debug warnings in browser console #269</a></li><li>Review PR <a href="https://github.com/casbin/casdoor/pull/102#pullrequestreview-682411165">feat: Allow the user to sign up with OAuth</a></li><li>Review PR <a href="https://github.com/casbin/casnode/pull/272#pullrequestreview-682331150">fix: Fix the bug that the ad doesn’t show up for anonymous access #270</a></li><li>Review PR <a href="https://github.com/casbin/casdoor/pull/92#pullrequestreview-678096847">feat: allow user signup with oauth</a></li><li>Review PR <a href="https://github.com/casbin/casnode/pull/259#pullrequestreview-676278571">feat: Add auto-generated topic tags</a></li><li>Review PR <a href="https://github.com/casbin/casnode/pull/253#pullrequestreview-674420635">feat: users can add tags to posts when they publish them #197</a></li><li>Review PR <a href="https://github.com/casbin/casdoor/pull/75#pullrequestreview-673767651">feat: add “forget password” [front &amp; backend]</a></li><li>Review PR <a href="https://github.com/casbin/casnode/pull/340#pullrequestreview-718769483">refactor: change jsdelivr to cdn.casbin.org</a></li><li>Review PR <a href="https://github.com/casbin/casnode/pull/336#pullrequestreview-716738317">fix: topic author error and memberbox fresh</a></li><li>Review PR <a href="https://github.com/casdoor/casbin-oa-android/pull/9#pullrequestreview-716734713">feat: implement the basic framework of casbin-oa app</a></li><li>Review PR <a href="https://github.com/casbin/casnode/pull/335#pullrequestreview-715497704">refactor: change cdn</a></li><li>Review PR <a href="https://github.com/casdoor/casdoor-js-sdk/pull/2#pullrequestreview-714789168">feat: general implement</a></li><li>Review PR <a href="https://github.com/casbin/casdoor/pull/189#pullrequestreview-713620711">feat: improve ApplicationEditPage</a></li><li>Review PR <a href="https://github.com/casbin/casdoor/pull/187#pullrequestreview-713054019">feat: fix header bugs, improve UI, optimize touchscreen experience</a></li><li>Review PR <a href="https://github.com/casbin/casbin-oa/pull/6#pullrequestreview-703997675">feat: You can get Prs from github automatically</a></li><li>Review PR <a href="https://github.com/casbin/casdoor/pull/160#pullrequestreview-703919548">feat: support LDAP</a></li><li>Review PR <a href="https://github.com/casbin/casdoor/pull/150#pullrequestreview-702138627">feat: Add log table and record all user behaviors into the table, add UI to view logs</a></li><li>Review PR <a href="https://github.com/casbin/casdoor/pull/148#pullrequestreview-700657858">feat: support 2fa</a></li><li>Review PR <a href="https://github.com/casbin/casdoor/pull/146#pullrequestreview-700574269">feat: support login UI customization</a></li><li>Review PR <a href="https://github.com/casnode/casnode-website/pull/17#pullrequestreview-699333174">feat: add installation by BT panel</a></li><li>Review PR <a href="https://github.com/casdoor/casdoor-php-sdk/pull/2#pullrequestreview-699328336">Add the code.</a></li><li>Review PR <a href="https://github.com/casbin/casnode/pull/317#pullrequestreview-698680205">feat: Install Casnode by BT panel</a></li><li>Review PR <a href="https://github.com/casbin/casbin-oa/pull/4#pullrequestreview-698567609">fix: Correct a small bug</a></li><li>Review PR <a href="https://github.com/casbin/casdoor/pull/143#pullrequestreview-698564255">feat: Integrate Crowdin</a></li><li>Review PR <a href="https://github.com/casbin/casnode/pull/348#pullrequestreview-728195139">feat: add frontconf management</a></li><li>Review PR <a href="https://github.com/casdoor/go-sms-sender/pull/2#pullrequestreview-727139514">Add VolcEngine SMS service support</a></li><li>Review PR <a href="https://github.com/casbin/casdoor/pull/239#pullrequestreview-725974995">fix:  table errors in frontend</a></li><li>Review PR <a href="https://github.com/casbin/casdoor/pull/224#pullrequestreview-724808035">feat: support local storage</a></li><li>Review PR <a href="https://github.com/casbin/casdoor/pull/217#pullrequestreview-720401001">feat: mount app.conf to container</a></li></ul>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>我与 Apple</title>
    <link href="/apple/"/>
    <url>/apple/</url>
    
    <content type="html"><![CDATA[<p>8 月 7 日早上，我听说 iCloud 相册会对用户上传的图片进行审查。随后我找到了<a href="https://www.apple.com/child-safety/">原文</a>，证实了这一消息。</p><p>这个新政策的大意是，对于某一类特定的违规图片，iCloud 会在上传前分析内容。如果违规，就提取特征上报。如果这个特征的上报次数到了一个阈值，并且在一个给定的库中，又通过了人工审核，Apple 就会禁用你的账户，并且举报你。</p><p>很早开始，我就模糊地意识到，互联网上没有隐私。对于我存放在所谓“私人云盘”里面的内容，我觉得只要不被删除或者篡改，哪怕直接公开在网上，我都不是非常介意。也就是说，我对于云盘的底线是，资料能完整地保存下来。毕竟上传到云盘，很大一个目的就是备份。</p><p>但是 Apple 这个新政策却告诉我：<strong>我的每一张照片，从规则上，都是可以被直接删掉的。</strong></p><p>刚开始的几个小时内，我非常矛盾。因为 Apple 这个行为是防止犯罪的，而我也支持防止犯罪，但这又触及了我的底线。在网上看了一些文章后，我逐渐理清了思路。在一封对 Apple 的公开信中，我读到了这些内容：</p><blockquote><p><em>“It’s impossible to build a client-side scanning system that can only be used for sexually explicit images sent or received by children. As a consequence, even a well-intentioned effort to build such a system will break key promises of the messenger’s encryption itself and open the door to broader abuses […] That’s not a slippery slope; that’s a fully built system just waiting for external pressure to make the slightest change.”</em></p></blockquote><p>Apple 的这个新系统，不可能只针对这类违规行为。只要外部施压，这些代码就可以找出任何类型的图片。现在，这些代码只在美国生效，并且只针对这类行为，但是以后呢？结合这个观点，我再次确认：<strong>我的任何资料，都是潜在的删除对象。</strong></p><p>于是，我关掉了我的 iCloud 云盘，并且停用 Apple Music，以后我可能也不会再买 Apple 的任何服务了。</p><h2 id="初识"><a href="#初识" class="headerlink" title="初识"></a>初识</h2><p>第一次听说 Apple 是小学的时候。</p><p>小学的时候大家都在用按键机，最高级的功能也就是跑一点 Java 游戏，浏览器一类的应用更是从来没想过。</p><p>然后我认识了 iPhone 4。当时满大街都是它的广告。对于刚刚有一部按键机的我来说，iPhone 简直就是一个无法理解的东西。我没法想象一个手机只有4个按键，任何操作靠点屏幕就能做到。</p><p>iPhone 4 对于我来说太过震撼，以至于数年后我上了初中，见到有同学还在用 iPhone 4，借来看了一下，发现有点卡，惊讶地问他：iPhone 还会卡吗？我熟练使用的按键机从来不会卡住，我下意识认为 iPhone 也是不可能卡的。</p><p>从那时开始，我就一直关注 Apple 的新产品。在新闻联播上看到 iPhone 5 发售，还挺激动的。</p><h2 id="插曲"><a href="#插曲" class="headerlink" title="插曲"></a>插曲</h2><blockquote><p>我最初接触的电子产品就是 Android 手机。直到现在，我还在折腾 Android，用的是 Pixel Experience 系统。使用 Android 的经历对我来说不能算是插曲，而应该是主线。但这是一篇关于 Apple 的文章，所以我还是把这段叫做“插曲”吧。</p></blockquote><p>随着时代的发展，我也用上了智能机，一部杂牌机。至今我都记得，版本号是 Android 4.0.3。</p><p>那部手机配置非常差，只有 128M 内存。当时主流智能机都是 1G 内存，我爹用的小米 2s 是 2G，我娘用的 HTC 是 1G。</p><p>我其实挺感谢那部手机的。正因为它配置差，我学会了折腾。我整天翻它的设置项，看看能不能再挤出一点内存来运行 Minecraft，或者同时打开 QQ 和浏览器。再过了一些时间，我学会了 Root，删掉了一些预装的垃圾。通过一个过量申请内存然后释放的软件挤出尽可能多的内存。我至今还记得第一次看到剩余内存大于 64M 时激动的心情。杂牌机当然不会有第三方 Rom，所以我学会刷机是稍微晚一点的事了。</p><p>正因为我有这段折腾经历，我比一般的人更了解一些底层的事情。在这个靠水军和 PPT 的时代，我能保留一些原始人的理智。如果我当时用的是 iPhone，可能永远都学不会这些。</p><h2 id="狂热"><a href="#狂热" class="headerlink" title="狂热"></a>狂热</h2><p>然后我用上了 iPhone。虽然之前零零散散也用过几次 iOS，但是第一次正经用 iPhone 还是高中。当时为了联络补课的老师，我得到了一部家长退役下来的 iPhone 6 plus。2019 年去用一部 2014 年发布的手机，它理所应当地非常慢。虽然慢，但我还是惊讶于 iOS 精致的 UI。</p><p>与 Android 不同，iOS 的控件非常灵动。非线性动画，各种花里胡哨的变换，还有出人意料的交互逻辑，让我不止一次去思考，这种效果应该如何优雅地去实现。</p><p>iOS 一次又一次地刷新我的认知，原来 UI 还可以做成这样。早年折腾 Android 的经验告诉我，这些东西不过是应用层面的炫技，如果一切照搬，那么 Android 大概率也能做出这种效果。但最终狂热战胜了理智，我开始不顾一切地支持 Apple。虽然从现在清醒的视角来看，Apple 十分封闭，并且它依赖这个封闭无理地抬高价格，依靠一手应用层面的联动来打造生态。这是可以超越的，并不是神。</p><p>上了大学之后我有了自己的电脑。数周后，我开始尝试黑苹果。花了 3 天整，我终于搞定了所有麻烦，成功进入了系统。macOS 给我带来的冲击并没有 iOS 那么猛烈。从 UI 上来看，macOS 和我之前用过的任何 Linux 发行版对比，都没有很大的区别，无非就是更精致了。</p><p>但是对于一个失去理智的粉丝来说，只要能看到 Apple 的 LOGO 就足够了。2020 年，Apple 发布了 M1 芯片。数月之后我入手了一台 Mac mini，这是我第一次用白苹果。即使是冷静后的现在来看，M1 芯片还是很优秀的，无论是打开程序，还是编译代码，速度都是翻倍地快。</p><h2 id="破灭"><a href="#破灭" class="headerlink" title="破灭"></a>破灭</h2><p>Apple 的 UI 实在是过于美好，美好到抑制了我的一些想法。</p><blockquote><p>谷歌有猫病。大家都下意识把谷歌看作一只猫猫。</p><p>猫猫犯错的时候，我们都会说：哎呀，猫猫打翻了水杯，但没关系，毕竟它只是一只猫猫啊！</p></blockquote><p>某种意义上，我也把 Apple 看作了一只猫。只要 Apple 不触碰我的底线，那我就能一直追捧它。</p><p>我的一位朋友也经常试图把我从这个困境中拉出来：</p><blockquote><p>Apple 的联动都是应用层面的，UI 更是表层的东西。任何厂商只要投入足够的资源，都能造出这些东西来。</p></blockquote><p>而我当时并不接受：</p><blockquote><p>应用层做得好也是好。</p></blockquote><p>而现在，这个形象已经彻底崩塌了。如同一开始说的，Apple 开始限制我在 iCloud 上面自由存放东西的权力了。iCloud 本身出问题并不能牵连到整个 Apple，事实上我一开始也只是打算停用 iCloud 相册。但这件事是一个引子，我仔细回忆了这些年我心底那个“理智”所控诉的一切，然后发现 Apple 并没有我想象的那么美好，于是一切崩塌。</p><h2 id="将来"><a href="#将来" class="headerlink" title="将来"></a>将来</h2><p>iCloud 审查内容的代码在 macOS 12 才会上线，我的 Mac 现在还是 macOS 11，但即使 Apple 撤回这个决定，我也不会更新到 12。一想到这家公司的所作所为，我内心就有一种抗拒感。祝愿高通研制出对标 Apple Silicon 的芯片，也祝愿 Linux 越做越好，让更多人拥抱开源。</p><p><strong>2021-09-23 update</strong> </p><p>现在已经卖掉了 mac，入手了一台轻薄本，Windows 11 还是挺不错的。以后不会用任何 Apple 的产品了，并且反对一切与 Apple 有关的东西（Apple 的艺术设计除外，他们的艺术设计还是可以肯定的）。</p>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>Google Summer of Code</title>
    <link href="/gsoc/"/>
    <url>/gsoc/</url>
    
    <content type="html"><![CDATA[<p>今年申请了 Google Summer of Code，向 Casbin 社区投递了 <a href="https://archives.kininaru.dev/gsoc/2021/proposal.pdf">Proposal</a>。</p><p>5 月 18 日收到了 Google 的邮件：</p><p><img src="https://archives.kininaru.dev/gsoc/2021/gsoc-accepted.png" alt="Accepted Email"></p>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>About</title>
    <link href="/about/"/>
    <url>/about/</url>
    
    <content type="html"><![CDATA[<h2 id="关于我"><a href="#关于我" class="headerlink" title="关于我"></a>关于我</h2><ul><li>C++ 爱好者，认为手动 GC 才是工程师的浪漫</li><li>Golang, Javascript, TypeScript</li><li>正在学习魔法（其实是算法</li><li>正在读文史类的书，希望自己的思维方式更接近人类，而不是机器</li><li>希望成为一个艺术家？（虽然不太可能实现）</li></ul><h2 id="爱好"><a href="#爱好" class="headerlink" title="爱好"></a>爱好</h2><ul><li>AU（A-SOUL）</li><li>文学（历史方面）</li><li>摄影</li></ul><p>快来找我聊聊吧😭我好无聊啊😭以上三点都能聊捏🤤</p><h2 id="联系我"><a href="#联系我" class="headerlink" title="联系我"></a>联系我</h2><p>Email: <a href="mailto:&#109;&#x65;&#64;&#109;&#x61;&#105;&#108;&#x2e;&#x6b;&#105;&#x6e;&#105;&#110;&#x61;&#x72;&#x75;&#46;&#100;&#101;&#118;">&#109;&#x65;&#64;&#109;&#x61;&#105;&#108;&#x2e;&#x6b;&#105;&#x6e;&#105;&#110;&#x61;&#x72;&#x75;&#46;&#100;&#101;&#118;</a></p><p>GitHub: <a href="https://github.com/Kininaru">嘉心猫</a></p>]]></content>
    
    
    
  </entry>
  
  
  
  
</search>
